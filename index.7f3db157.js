let e;const t=document.querySelector(".button"),r=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),n=document.querySelector(".message-start"),c=document.querySelectorAll(".field-row"),a=document.querySelector(".game-score");let o=0,l=!1,d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];const i=t=>{let n;switch(e=[...d],t.key){case"ArrowLeft":L(e);break;case"ArrowRight":E(e);break;case"ArrowDown":w(e);break;case"ArrowUp":y(e);break;default:return}for(let t=0;t<4;t++)for(let r=0;r<4;r++)e[t][r]!==d[t][r]&&(d=e,m(),k());l&&r.classList.remove("hidden"),h()||(f(),n=!1,e.forEach(e=>{e.forEach((t,r)=>{t===e[r+1]&&(n=!0)})}),n)||(s.classList.remove("hidden"),document.removeEventListener("keydown",i))};function h(){let t=!1;return e.forEach(e=>{e.some((t,r)=>0===t||t===e[r+1])&&(t=!0)}),t}function u(){e.forEach(e=>e.reverse())}function f(){e=e[0].map((t,r)=>e.map(e=>e[r]))}t.addEventListener("click",()=>{document.addEventListener("keydown",i),t.classList.contains("start")?(t.classList.replace("start","restart"),t.innerText="Restart",n.classList.add("hidden")):(l=!1,g()),m(),m(),k()});const m=()=>{let[e,t]=function(){let e=[];return d.forEach((t,r)=>{t.forEach((t,s)=>{0===t&&e.push([r,s])})}),e[Math.floor(Math.random()*e.length)]}();d[e][t]=.9>Math.random()?2:4},L=()=>{h&&(e=e.map(e=>{let t=e.filter(e=>0!==e);return t.forEach((e,r)=>{e===t[r+1]&&(t[r]*=2,t.splice(r+1,1),o+=t[r],2048===t[r]&&(l=!0))}),t.concat(Array(4-t.length).fill(0))}))},E=()=>{h&&(u(),L(),u())},w=()=>{f(),E(),f()},y=()=>{f(),L(),f()},k=()=>{d.forEach((e,t)=>{e.forEach((e,r)=>{let s=c[t].children[r];0===e?(s.textContent="",s.className="field-cell"):(s.textContent=e,s.className=`field-cell field-cell--${e}`)})}),a.textContent=o},g=()=>{o=0,d=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s.classList.contains("hidden")||s.classList.add("hidden"),r.classList.contains("hidden")||r.classList.add("hidden")};
//# sourceMappingURL=index.7f3db157.js.map
